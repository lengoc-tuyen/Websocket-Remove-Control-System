<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <title>Trang ch√≠nh ‚Äì Christmas LAN Remote</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        /* (Gi·ªØ nguy√™n to√†n b·ªô CSS ƒë·∫πp c·ªßa b·∫°n) */
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
            background: linear-gradient(160deg, #052e16, #020617 55%);
            color: #f9fafb;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: #064e3b;
            color: #f9fafb;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(15, 23, 42, 0.8);
        }

        .app-title {
            font-size: 18px;
            font-weight: 700;
        }

        .app-title span { color: #f97316; }

        .header-right {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
        }

        .ip-label {
            background: rgba(15, 23, 42, 0.9);
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            display: flex;
            align-items: center;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 999px;
            display: inline-block;
            margin-right: 4px;
        }
        .status-connected { background: #22c55e; }
        .status-disconnected { background: #ef4444; }

        .btn {
            border: none;
            border-radius: 999px;
            padding: 7px 12px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
        }

        .btn-primary { background: #f97316; color: #111827; }
        .btn-outline { background: transparent; color: #e5e7eb; border: 1px solid rgba(148, 163, 184, 0.7); text-decoration: none; }
        .btn-sm { padding: 5px 10px; font-size: 12px; }
        .btn-danger { background: #ef4444; color: #fef2f2; }
        .btn-warning { background: #facc15; color: #451a03; }

        .layout { flex: 1; display: flex; min-height: 0; }
        main { flex: 1; padding: 12px 14px; display: flex; flex-direction: column; gap: 8px; overflow: hidden; }

        .section-header { display: flex; justify-content: space-between; align-items: center; font-size: 14px; }
        .section-header small { font-size: 12px; color: #9ca3af; }

        .tabs { display: flex; flex-wrap: wrap; gap: 6px; border-bottom: 1px solid rgba(148,163,184,0.4); margin-top: 6px; padding-left: 2px; }
        .tab-btn { position: relative; background: transparent; border: none; cursor: pointer; padding: 7px 14px; font-size: 14px; font-weight: 500; color: #e5e7eb; transition: 0.25s; z-index: 2; display: flex; align-items: center; gap: 6px; }
        .tab-btn.active { color: #522b10; font-weight: 700; }
        .tab-btn.active::before { content: ""; position: absolute; top: -4px; left: 50%; transform: translateX(-50%); width: calc(100% + 22px); height: 44px; border-radius: 14px 14px 0 0; background: linear-gradient(135deg, #fecaca, #fed7aa); border: 2px solid #f97316; box-shadow: 0 6px 16px rgba(0,0,0,0.45); z-index: -1; }

        .tab-content { flex: 1; margin-top: -1px; overflow: auto; font-size: 14px; display: flex; }
        .gift-box { position: relative; margin-top: 12px; margin-bottom: 10px; flex: 1; border-radius: 18px; background: linear-gradient(135deg, #fecaca, #fed7aa); padding: 14px 14px 18px; box-shadow: 0 18px 35px rgba(0,0,0,0.6); border: 2px solid #f97316; overflow: hidden; }
        .gift-inner { position: relative; z-index: 1; background: rgba(15, 23, 42, 0.96); border-radius: 14px; padding: 12px; border: 1px solid rgba(15,23,42,0.9); color: #e5e7eb; height: 100%; overflow-y: auto;}

        .section-actions { margin-top: 10px; display: flex; flex-wrap: wrap; gap: 8px; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 8px; }
        th, td { padding: 6px 8px; border-bottom: 1px solid rgba(55,65,81,0.8); text-align: left; }
        th { background: #020617; }

        #screenPreview, #webcamPreview { max-width: 100%; max-height: 400px; border-radius: 8px; border: 1px solid rgba(148,163,184,0.6); background: #020617; margin-top: 6px; object-fit: contain; }
        
        .status-bar { background: #0b1120; color: #e5e7eb; font-size: 12px; padding: 5px 10px; border-top: 1px solid rgba(15,23,42,0.9); display: flex; justify-content: space-between;}
    </style>
    <!-- Th√™m th∆∞ vi·ªán SignalR -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js"></script>
</head>
<body>
<header>
    <div class="app-title">
        üéÑ <span>Christmas</span> LAN Remote
    </div>
    <div class="header-right">
        <div class="ip-label">
            Server IP: <input id="serverIpInput" value="192.168.1.99" placeholder="Nh·∫≠p IP (vd: 192.168.1.5)" style="background:transparent; border:none; color:white; width: 140px; outline: none; font-weight: bold;" />
        </div>
        <div id="connectionStatus" style="display: flex; align-items: center; gap: 5px;">
            <span id="statusDot" class="status-dot status-disconnected"></span>
            <span id="statusText">Disconnected</span>
        </div>
        <button id="toggleConnectBtn" class="btn btn-primary">K·∫øt n·ªëi</button>
    </div>
</header>

<div class="layout">
    <main>
        <div class="section-header">
            <div>ƒêang ƒëi·ªÅu khi·ªÉn: <strong id="currentDeviceName">Server LAN</strong></div>
            <small>Christmas Edition ‚Ä¢ WebSocket Realtime Control</small>
        </div>

        <!-- TAB + N∆† -->
        <div class="tabs">
            <button class="tab-btn active" data-target="appsSection"><span class="tab-icon">üì¶</span> App</button>
            <button class="tab-btn" data-target="processesSection"><span class="tab-icon">‚öô</span> Process</button>
            <button class="tab-btn" data-target="screenSection"><span class="tab-icon">üñ•</span> Screen</button>
            <button class="tab-btn" data-target="keysSection"><span class="tab-icon">‚å®</span> Keylog</button>
            <button class="tab-btn" data-target="webcamSection"><span class="tab-icon">üì∑</span> Webcam</button>
            <button class="tab-btn" data-target="powerSection"><span class="tab-icon">üîå</span> Power</button>
        </div>

        <div class="tab-content">
            <!-- 1. App Control -->
            <section id="appsSection" style="flex:1;">
                <div class="gift-box active">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">üì¶ Qu·∫£n l√Ω ·ª©ng d·ª•ng (List / Start / Stop)</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="refreshAppsBtn">L·∫•y danh s√°ch App</button>
                            <input type="text" id="appNameInput" placeholder="T√™n App (vd: notepad)" class="text-black px-2 py-1 rounded text-sm" style="width: 150px;">
                            <button class="btn btn-outline btn-sm" id="startAppBtn">Start App</button>
                            <button class="btn btn-outline btn-sm" id="stopSelectedAppBtn">Stop App ƒë√£ ch·ªçn</button>
                        </div>
                        <div style="max-height: 400px; overflow-y: auto; margin-top: 10px;">
                            <table>
                                <thead>
                                <tr>
                                    <th style="width:30px;">Ch·ªçn</th>
                                    <th>PID</th>
                                    <th>T√™n ·ª©ng d·ª•ng</th>
                                    <th>Ti√™u ƒë·ªÅ c·ª≠a s·ªï</th>
                                    <th>RAM (MB)</th>
                                </tr>
                                </thead>
                                <tbody id="appsTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. Process Control -->
            <section id="processesSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">‚öô Qu·∫£n l√Ω ti·∫øn tr√¨nh (List / Stop)</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="refreshProcessesBtn">L·∫•y danh s√°ch Process</button>
                            <button class="btn btn-outline btn-sm" id="stopSelectedProcessBtn">Stop Process</button>
                        </div>
                        <div style="max-height: 400px; overflow-y: auto; margin-top: 10px;">
                            <table>
                                <thead>
                                <tr>
                                    <th style="width:30px;">Ch·ªçn</th>
                                    <th>PID</th>
                                    <th>T√™n ti·∫øn tr√¨nh</th>
                                    <th>RAM (MB)</th>
                                </tr>
                                </thead>
                                <tbody id="processesTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. Screenshot -->
            <section id="screenSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">üñ• Ch·ª•p m√†n h√¨nh t·ª´ xa</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="captureScreenBtn">Ch·ª•p m√†n h√¨nh (Snapshot)</button>
                        </div>
                        <div style="text-align:center;">
                            <img id="screenPreview" src="" alt="Ch∆∞a c√≥ ·∫£nh m√†n h√¨nh..." />
                        </div>
                    </div>
                </div>
            </section>

            <!-- 4. Keylogger -->
            <section id="keysSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">‚å® Keylogger</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="startKeylogBtn">B·∫Øt ƒë·∫ßu</button>
                            <button class="btn btn-outline btn-sm" id="stopKeylogBtn">D·ª´ng</button>
                            <button class="btn btn-outline btn-sm" id="clearKeylogBtn">Xo√° log</button>
                        </div>
                        <textarea id="keylogArea" readonly class="w-full h-64 border p-2 bg-gray-900 text-green-400 font-mono text-sm rounded resize-none mt-2"></textarea>
                    </div>
                </div>
            </section>

            <!-- 5. Webcam -->
            <section id="webcamSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">üì∑ Webcam (Quay b·∫±ng ch·ª©ng 3s)</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="webcamOnBtn">M·ªü Cam & Quay 3s</button>
                            <button class="btn btn-outline btn-sm" id="webcamOffBtn">T·∫Øt Cam</button>
                        </div>
                        <div style="min-height: 300px; background: #000; display:flex; align-items:center; justify-content:center; margin-top: 10px; border-radius: 8px;">
                            <img id="webcamPreview" src="" style="max-width:100%; max-height:340px;" alt="Video Stream" />
                        </div>
                    </div>
                </div>
            </section>

            <!-- 6. Power -->
            <section id="powerSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">üîå ƒêi·ªÅu khi·ªÉn ngu·ªìn</h2>
                        <div style="display: flex; gap: 20px; margin-top: 20px;">
                            <div style="flex:1; background:#020617; padding:15px; border-radius:12px; border:1px dashed #facc15;">
                                <h3 style="color:#facc15; margin-bottom:10px;">Restart</h3>
                                <p style="font-size:13px; color:#9ca3af; margin-bottom:15px;">Kh·ªüi ƒë·ªông l·∫°i m√°y Server.</p>
                                <button class="btn btn-warning btn-sm" id="restartBtn" style="width:100%">G·ª≠i l·ªánh Restart</button>
                            </div>
                            <div style="flex:1; background:#020617; padding:15px; border-radius:12px; border:1px dashed #ef4444;">
                                <h3 style="color:#ef4444; margin-bottom:10px;">Shutdown</h3>
                                <p style="font-size:13px; color:#9ca3af; margin-bottom:15px;">T·∫Øt m√°y Server ho√†n to√†n.</p>
                                <button class="btn btn-danger btn-sm" id="shutdownBtn" style="width:100%">G·ª≠i l·ªánh Shutdown</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
</div>

<div class="status-bar">
    <span id="statusBarText">S·∫µn s√†ng k·∫øt n·ªëi...</span>
    <span id="lastUpdated" style="color: #9ca3af;"></span>
</div>

<script>
    // --- C·∫§U H√åNH K·∫æT N·ªêI REALTIME ---
    let connection = null;
    let isConnected = false;

    // UI Elements
    const statusDot = document.getElementById("statusDot");
    const statusText = document.getElementById("statusText");
    const toggleConnectBtn = document.getElementById("toggleConnectBtn");
    const statusBarText = document.getElementById("statusBarText");

    function setStatus(msg) {
        statusBarText.textContent = msg;
        document.getElementById("lastUpdated").textContent = new Date().toLocaleTimeString();
        console.log(msg);
    }

    // H√ÄM X·ª¨ L√ù URL TH√îNG MINH
    function buildConnectionUrl(input) {
        let url = input.trim();
        
        // 1. N·∫øu ng∆∞·ªùi d√πng ch·ªâ nh·∫≠p IP (vd: 192.168.1.5) -> Th√™m http v√† port m·∫∑c ƒë·ªãnh
        if (!url.startsWith("http")) {
            url = "http://" + url;
        }
        
        // 2. N·∫øu thi·∫øu port (kh√¥ng c√≥ d·∫•u : sau ph·∫ßn ip) -> Th√™m port 5000
        // Logic check: ƒë·∫øm s·ªë d·∫•u hai ch·∫•m. http:// l√† 1, n·∫øu c√≥ port th√¨ ph·∫£i l√† 2.
        const colonCount = (url.match(/:/g) || []).length;
        if (colonCount < 2) {
            url += ":5000";
        }

        // 3. N·∫øu thi·∫øu endpoint -> Th√™m /controlHub
        if (!url.endsWith("/controlHub")) {
            // X√≥a d·∫•u / ·ªü cu·ªëi n·∫øu c√≥ ƒë·ªÉ tr√°nh double slash
            if(url.endsWith("/")) url = url.slice(0, -1);
            url += "/controlHub";
        }

        return url;
    }

    async function connect() {
        const rawIp = document.getElementById('serverIpInput').value;
        const finalUrl = buildConnectionUrl(rawIp);
        
        setStatus("ƒêang k·∫øt n·ªëi t·ªõi: " + finalUrl);
        
        // Kh·ªüi t·∫°o k·∫øt n·ªëi SignalR
        connection = new signalr.HubConnectionBuilder()
            .withUrl(finalUrl)
            .withAutomaticReconnect()
            .build();

        // --- ƒêƒÇNG K√ù H√ÄM NH·∫¨N D·ªÆ LI·ªÜU T·ª™ SERVER (LISTENERS) ---

        // 1. Nh·∫≠n danh s√°ch (cho c·∫£ App v√† Process)
        connection.on("ReceiveProcessList", (json) => {
            try {
                const list = JSON.parse(json);
                // X√°c ƒë·ªãnh ƒëang ·ªü Tab n√†o ƒë·ªÉ render v√†o b·∫£ng ƒë√≥
                if(document.getElementById("appsSection").style.display !== "none") {
                    renderTable("appsTableBody", list, "selectedApp");
                } else {
                    renderTable("processesTableBody", list, "selectedProcess");
                }
                setStatus(`ƒê√£ t·∫£i ${list.length} m·ª•c.`);
            } catch (e) {
                console.error("L·ªói parse JSON:", e);
                setStatus("L·ªói d·ªØ li·ªáu t·ª´ Server.");
            }
        });

        // 2. Nh·∫≠n th√¥ng b√°o tr·∫°ng th√°i
        connection.on("ReceiveStatus", (type, success, message) => {
            setStatus(`[${type}] ${message}`);
            if(!success) alert(`L·ªói t·ª´ Server: ${message}`);
        });

        // 3. Nh·∫≠n ·∫£nh (Screenshot ho·∫∑c Webcam Frame)
        connection.on("ReceiveImage", (type, base64Data) => {
            const src = "data:image/jpeg;base64," + base64Data;
            if(type === "SCREENSHOT") {
                document.getElementById("screenPreview").src = src;
                setStatus("ƒê√£ nh·∫≠n ·∫£nh m√†n h√¨nh.");
            } else if (type === "WEBCAM_FRAME") {
                document.getElementById("webcamPreview").src = src;
            }
        });

        // 4. Nh·∫≠n Keylog
        connection.on("ReceiveKeyLog", (key) => {
            const area = document.getElementById("keylogArea");
            area.value += key;
            area.scrollTop = area.scrollHeight; 
        });

        // --- B·∫ÆT ƒê·∫¶U K·∫æT N·ªêI ---
        try {
            await connection.start();
            isConnected = true;
            updateConnectionUI(true);
            setStatus("K·∫øt n·ªëi th√†nh c√¥ng!");
        } catch (err) {
            console.error(err);
            setStatus("K·∫øt n·ªëi th·∫•t b·∫°i: " + err.toString());
            alert("Kh√¥ng th·ªÉ k·∫øt n·ªëi t·ªõi Server. H√£y ki·ªÉm tra IP v√† ch·∫Øc ch·∫Øn Server ƒëang ch·∫°y.");
        }

        connection.onclose(() => {
            isConnected = false;
            updateConnectionUI(false);
            setStatus("M·∫•t k·∫øt n·ªëi v·ªõi Server.");
        });
    }

    async function disconnect() {
        if(connection) await connection.stop();
        isConnected = false;
        updateConnectionUI(false);
        setStatus("ƒê√£ ng·∫Øt k·∫øt n·ªëi.");
    }

    function updateConnectionUI(connected) {
        if (connected) {
            statusDot.className = "status-dot status-connected";
            statusText.textContent = "Connected";
            toggleConnectBtn.textContent = "Ng·∫Øt k·∫øt n·ªëi";
            toggleConnectBtn.classList.remove("btn-primary");
            toggleConnectBtn.classList.add("btn-danger");
        } else {
            statusDot.className = "status-dot status-disconnected";
            statusText.textContent = "Disconnected";
            toggleConnectBtn.textContent = "K·∫øt n·ªëi";
            toggleConnectBtn.classList.add("btn-primary");
            toggleConnectBtn.classList.remove("btn-danger");
        }
    }

    toggleConnectBtn.addEventListener("click", () => {
        if (!isConnected) connect();
        else disconnect();
    });

    function checkConn() {
        if (!isConnected) { 
            alert("Vui l√≤ng k·∫øt n·ªëi t·ªõi Server tr∆∞·ªõc!"); 
            return false; 
        }
        return true;
    }

    // --- X·ª¨ L√ù S·ª∞ KI·ªÜN N√öT B·∫§M (G·ªåI SERVER) ---

    // 1. Apps & Processes
    document.getElementById("refreshAppsBtn").addEventListener("click", () => {
        if(checkConn()) {
            setStatus("ƒêang t·∫£i danh s√°ch App...");
            connection.invoke("GetProcessList", true); // true = Apps only
        }
    });
    document.getElementById("refreshProcessesBtn").addEventListener("click", () => {
        if(checkConn()) {
            setStatus("ƒêang t·∫£i danh s√°ch Process...");
            connection.invoke("GetProcessList", false); // false = All processes
        }
    });

    document.getElementById("startAppBtn").addEventListener("click", () => {
        const name = document.getElementById("appNameInput").value;
        if(checkConn() && name) connection.invoke("StartProcess", name);
        else if(!name) alert("Vui l√≤ng nh·∫≠p t√™n ·ª©ng d·ª•ng!");
    });

    // H√†m l·∫•y ID t·ª´ radio button ƒë√£ ch·ªçn
    function getSelectedId(groupName) {
        const el = document.querySelector(`input[name="${groupName}"]:checked`);
        return el ? parseInt(el.value) : null;
    }

    document.getElementById("stopSelectedAppBtn").addEventListener("click", () => {
        const id = getSelectedId("selectedApp");
        if(checkConn()) {
            if(id) connection.invoke("KillProcess", id);
            else alert("Vui l√≤ng ch·ªçn m·ªôt App trong danh s√°ch!");
        }
    });
    document.getElementById("stopSelectedProcessBtn").addEventListener("click", () => {
        const id = getSelectedId("selectedProcess");
        if(checkConn()) {
            if(id) connection.invoke("KillProcess", id);
            else alert("Vui l√≤ng ch·ªçn m·ªôt Process trong danh s√°ch!");
        }
    });

    // 2. Screenshot
    document.getElementById("captureScreenBtn").addEventListener("click", () => {
        if(checkConn()) {
            setStatus("ƒêang y√™u c·∫ßu ch·ª•p m√†n h√¨nh...");
            connection.invoke("GetScreenshot");
        }
    });

    // 3. Webcam
    document.getElementById("webcamOnBtn").addEventListener("click", () => {
        if(checkConn()) {
            setStatus("ƒêang y√™u c·∫ßu Webcam...");
            connection.invoke("RequestWebcamProof");
        }
    });
    document.getElementById("webcamOffBtn").addEventListener("click", () => {
        if(checkConn()) connection.invoke("CloseWebcam");
    });

    // 4. Keylogger
    document.getElementById("startKeylogBtn").addEventListener("click", () => {
        if(checkConn()) connection.invoke("StartKeyLogger");
    });
    document.getElementById("stopKeylogBtn").addEventListener("click", () => {
        if(checkConn()) connection.invoke("StopKeyLogger");
    });
    document.getElementById("clearKeylogBtn").addEventListener("click", () => {
        document.getElementById("keylogArea").value = "";
    });

    // 5. Power
    document.getElementById("restartBtn").addEventListener("click", () => {
        if(checkConn() && confirm("C·∫¢NH B√ÅO: B·∫°n c√≥ ch·∫Øc mu·ªën RESTART m√°y Server ngay l·∫≠p t·ª©c?")) {
            connection.invoke("ShutdownServer", true);
        }
    });
    document.getElementById("shutdownBtn").addEventListener("click", () => {
        if(checkConn() && confirm("C·∫¢NH B√ÅO: B·∫°n c√≥ ch·∫Øc mu·ªën T·∫ÆT M√ÅY Server ngay l·∫≠p t·ª©c?")) {
            connection.invoke("ShutdownServer", false);
        }
    });

    // --- HELPER: RENDER TABLE ---
    function renderTable(tbodyId, data, groupName) {
        const tbody = document.getElementById(tbodyId);
        tbody.innerHTML = "";
        
        if(data.length === 0) {
            tbody.innerHTML = "<tr><td colspan='5' style='text-align:center; padding:10px;'>Kh√¥ng c√≥ d·ªØ li·ªáu</td></tr>";
            return;
        }

        data.forEach(p => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td style="text-align:center;"><input type="radio" name="${groupName}" value="${p.id}"></td>
                <td>${p.id}</td>
                <td style="font-weight:bold; color:#2563eb;">${p.name}</td>
                <td>${p.title || '-'}</td>
                <td>${(p.memoryUsage / 1024 / 1024).toFixed(1)}</td>
            `;
            tbody.appendChild(tr);
        });
    }

    // Tab switching logic (Gi·ªØ nguy√™n)
    const tabButtons = document.querySelectorAll(".tab-btn");
    const sections = {
        appsSection: document.getElementById("appsSection"),
        processesSection: document.getElementById("processesSection"),
        screenSection: document.getElementById("screenSection"),
        keysSection: document.getElementById("keysSection"),
        webcamSection: document.getElementById("webcamSection"),
        powerSection: document.getElementById("powerSection"),
    };

    tabButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
            tabButtons.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            const target = btn.getAttribute("data-target");
            Object.keys(sections).forEach((key) => {
                sections[key].style.display = (key === target) ? "block" : "none";
            });
        });
    });
</script>
</body>
</html>